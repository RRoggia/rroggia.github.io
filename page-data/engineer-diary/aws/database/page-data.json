{
    "componentChunkName": "component---src-templates-folder-template-js",
    "path": "/engineer-diary/aws/database",
    "result": {"pageContext":{"parentPath":"/engineer-diary/aws/database","files":[{"fileAbsolutePath":"/home/runner/work/rroggia.github.io/rroggia.github.io/content/engineer-diary/AWS/database/dynamodb.md","html":"<p><a href=\"https://docs.aws.amazon.com/dynamodb/\">Documentation</a></p>\n<p>Demo:</p>\n<ul>\n<li><a href=\"https://github.com/RRoggia/aws-workloads/tree/main/dynamodb\">Private Repository</a></li>\n</ul>\n<h2>Overview</h2>\n<p>DynamoDB allows you to create <strong>Tables</strong> (a collection of Items) to store your <strong>Items</strong>, each Item contains a collection of <strong>Attributes</strong>. There are two types of tables:</p>\n<ul>\n<li><strong>Table</strong>: Replicated in multi AZ within a Region.</li>\n<li><strong>Global Table</strong>:  Replicated in multi Region. Only supports Eventually consistent reads.</li>\n</ul>\n<p>Tables also have a class:</p>\n<ul>\n<li><strong>Standard</strong>: General purpose</li>\n<li><strong>Standard Infrequent Access</strong>: Long term data with infrequent access data</li>\n</ul>\n<p>Because, DynamoDB is a NoSQL database items do not require to have a specific schema, each item can have its own attributes, however, all the items must have the <strong>Primary Key</strong>. The primary keys are used to identify each item of a Table. There's two types of primary keys:</p>\n<ul>\n<li><strong>Simple</strong>: Partition Key</li>\n<li><strong>Composed</strong>: Partition Key + Sort Key</li>\n</ul>\n<p>The partition key is one of the table's attribute and it's used as input in an internal HASH function used to determine which partition the item is going to be store. Partition keys are also known as <strong>Hash attribute</strong>. For composed Primary keys, the same logic described previously applies, but, in addition to that the items with same Partition key are stored in the same partition and sorted by the Sort key attribute. The Sort keys is also known as <strong>Range attribute</strong>.</p>\n<p>In addition to the primary key, you can also create secondary <strong>Indexes</strong> to improve the search patterns in your table. There are two types of secondary indexes:</p>\n<ul>\n<li><strong>Local Secondary index</strong> (LSI): It uses the same Partition Key but you can specify a different Sort Key. It must be specified during the Table creation. Maximum 5 LSI.</li>\n<li><strong>Global Secondary Index</strong> (GSI): It can use completely different Partition and Sort keys. Maximum 20 GSI.</li>\n</ul>\n<p>You can create <strong>Backups</strong> for your table or activate the <strong>Point in time recovery</strong> which automatically manages the back for you allowing to restore your data to any point in time during the previous 35 days.</p>\n<p>By default all data is <strong>fully encrypted at rest</strong> the AWS KMS keys are managed by Dynamo. You can configure it to use AWS managed keys in KMS.</p>\n<h3>Capacity Mode</h3>\n<p>The capacity mode determines how you are going to be charged for reading and writing data. There is two options to capacity mode</p>\n<ul>\n<li><strong>On Demand</strong>: No need to provision, pay per request</li>\n<li><strong>Provisioned</strong>: You specify the Read and Write Capacity and auto scaling rules based on percentage of utilization.</li>\n</ul>\n<p>For the Provisioned mode you need to calculate the <strong>Read Capacity Unit</strong> (RCU) and <strong>Write Capacity Unit</strong> (WCU) see below how to estimate their values.</p>\n<h4>Read Capacity Unit</h4>\n<p>Each RCU can reads items up to 4 KB, items that exceed use more RCUs. Depending on the Request read mode the <strong>Read Request Unit</strong> also changes:</p>\n<ul>\n<li>For <strong>Strongly consistent read</strong> you spend <strong>1 RCU</strong> per request.</li>\n<li>For <strong>Eventually consistent read</strong> you spend <strong>0,5 RCU</strong> per request.</li>\n</ul>\n<p>To calculate the RCU for a given item you use the following formula:</p>\n<p><code>Item size / 4KB * Read Request unit</code></p>\n<p>Therefore, an Item of 12KB you would spend:</p>\n<ul>\n<li><code>12 / 4 * 1 = 3</code></li>\n<li><code>12 / 4 * 0,5 = 1,5</code>, rounded up to <code>2</code>.</li>\n</ul>\n<h4>Write Capacity Unit</h4>\n<p>Each Write Capacity Unit writes up to 1KB, therefore, it's simpler to use calculate the amount of WCU required. See the formula below:</p>\n<p><code>Item Size / 1KB</code></p>\n<p>Therefore, an Item with 12KB would require 12 WCU.</p>\n<h3>Reading Data</h3>\n<p>Dynamo DB API offers different methods to fetch data from the database:</p>\n<ul>\n<li>\n<p><strong>GetItem</strong>: Returns the Item identified with the given Primary Key in the Table.</p>\n<ul>\n<li>By default, it uses <strong>eventual consistency reads</strong>, however, it supports <strong>consistent reads</strong>.</li>\n<li>Unless you specify a <code>ProjectionExpression</code> with the item's attributes that you want, all item's attributes are returned.</li>\n</ul>\n</li>\n<li>\n<p><strong>Scan</strong>: The scan operation scan all items of a Table, secondary index or global index. When creating the request consider:</p>\n<ul>\n<li>By default, it uses <strong>eventual consistency reads</strong>, however, it supports <strong>consistent reads</strong>.</li>\n<li>Unless you specify a <code>ProjectionExpression</code> with the item's attributes that you want, all item's attributes are returned.</li>\n<li>You can use a  <code>FilterExpression</code> to filter the items. </li>\n<li><code>ExpressionAttributeNames</code> and <code>ExpressionAttributeValues</code> are used together with other Expressions to create placeholders for values and attributes.</li>\n<li>For pagination using the <code>Limit</code> or when the request exceeds 1 MB, you can send the <code>ExclusiveStartKey</code> in your next request, to start the scan from after the last key read.</li>\n<li>The <code>Limit</code> specifies how many items are going to be scanned. If you apply a <code>FilterExpression</code> together with a <code>Limit</code>, the number of items returned can be lower than the <code>Limit</code> even if there's more items that match the <code>FilterExpression</code>.</li>\n<li>You can use the <code>TotalSegment</code>and <code>Segment</code> to run a parallel scan for big tables.</li>\n</ul>\n</li>\n<li><strong>Query</strong>: Returns all items with that partition key value. </li>\n</ul>\n<h3>Streaming item-level changes</h3>\n<p>You can configure Dynamo to capture and push the item-level changes to both:</p>\n<ul>\n<li>\n<p>Dynamo DB streams: Stores information in a log for 24h</p>\n<ul>\n<li>Supports different view types</li>\n<li>Only key attributes</li>\n<li>New item</li>\n<li>Old item</li>\n<li>New and Old item</li>\n</ul>\n</li>\n<li>Kinesis data stream</li>\n</ul>","frontmatter":{"title":"Dynamo DB"},"isFile":true,"fileName":"dynamodb"},{"fileAbsolutePath":"/home/runner/work/rroggia.github.io/rroggia.github.io/content/engineer-diary/AWS/database/relational-database-service.md","html":"<h2>Overview</h2>\n<p>AWS RDS is a AWS fully managed Database server as a service (DBSaaS) that runs in a AWS region. RDS takes care of most of the management and maintenance tasks making easy to setup any of the 6 Database Engines RDS offers.</p>\n<h2>Core Concepts</h2>\n<p>AWS RDS is a private service with AZ resilience, but it can be configured to be have regional, or even global resilience. In RDS you configure <strong>Database Instances</strong>, isolated database environment. One Database Instance can contain several Databases, and each database several tables. </p>\n<p>When you are going to launch a Database instance you need to specify the <strong>Database Engine</strong>. AWS RDS supports several Database Engines, which are the relational database software that runs in the Database Instance:</p>\n<ul>\n<li>MySQL</li>\n<li>MariaDB</li>\n<li>PostgresSQL</li>\n<li>Oracle</li>\n<li>Microsoft SQL Server</li>\n</ul>\n<p>A database instance also have different Deployment options:</p>\n<ul>\n<li><strong>Single DB Instance</strong>: Runs a single instance of the database. Lowest level of resilliency.</li>\n<li><strong>Multi-AZ DB Instance:</strong> Runs a <strong>primary</strong> and a <strong>standby</strong> instances in different AZs of the same region. Applies <strong>Synchronous replication</strong> to the standby. A transaction is only committed when also applied to the stand-by. The stand-by instance <strong>cannot be accessed</strong> unless a failure occurs and it's promoted, with exception of backups. In case of failures the <strong>CNAME</strong> is automatically change to the failover instance.</li>\n<li>\n<p><strong>Multi-AZ DB Cluster</strong>: Runs a primary <strong>write/read</strong> instance and 2 <strong>read-only</strong> in 3 different AZs of the same region. It applies Asynchronous replication to the read instances. A transaction is considered committed when applied to at least 1 read replica. Read replicas can be accessed by clients through their own endpoints. They are useful to distribute load and improve read workload. In cases of primary's failure, RDS manages failover to one of the readers DB instances. </p>\n<p>Multi AZ cluster provides 3 types of endpoints:</p>\n<ul>\n<li>Cluster endpoint: The primary instance with write/read access</li>\n<li>Reader endpoint: Endpoint to connect to one of the read only instances</li>\n<li>Instance endpoint: Endpoint to a specific instance.</li>\n</ul>\n</li>\n</ul>\n<p>You also need to choose the Instance type of our database instance, this will determine the instance's resources.</p>\n<ul>\n<li><strong>Standard</strong>:  ...</li>\n<li><strong>Memory Optimized</strong>: ...</li>\n<li><strong>Burstable Performance</strong>: ...</li>\n</ul>\n<p>Each instance has its own storage. This also applies to standby and read replicas. There are also different offering instance classes for storage.</p>\n<ul>\n<li><strong>General Purpose SSD</strong>:...</li>\n<li><strong>Provisioned IOPS SSD</strong>:...</li>\n<li><strong>Magnetic</strong>:...</li>\n</ul>","frontmatter":{"title":"RDS - Relational Database Service"},"isFile":true,"fileName":"relational-database-service"}],"folders":[]}},
    "staticQueryHashes": ["1507822185","2095566405","2894216461","425755332"]}